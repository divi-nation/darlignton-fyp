<?php require_once "conn.php" ?>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marina Mall Marketplace</title>
    
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="shop.css">
    <link rel="stylesheet" href="cart.css">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

</head>
<body>

    <div class="mycart">
        <h4>SHOPPING CART</h4>
        <div class="cont">
            <span class="oy">
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
<div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                <div class="cartitem">
                    <div class="c_image cen">
                        <img src="mb.jpg" alt="">

                    </div>

                    <div class="desc">
                        <h3>Apple MacBook Pro 2022</h3>
                        <p> Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam!
                        </p>
                    </div>

                    <div class="price cen">
                        <div class="qty cen">
                            <aside class="b cen">-</aside>
                            <aside class="cen">1</aside>
                            <aside class="b cen">+</aside>
                        </div>

                        <div class="amt cen">
                            <aside>Unit Price: <br> 5400</aside>
                            <aside>Sub Total: <br> 5400</aside>
                        </div>

                    </div>

                </div>
                 
            </span>
            <span>
                <div class="os">
                    <h3>ORDER SUMMARY</h3>
                    <div class="val cen">
                        <h6>SUBTOTAL</h6>
                        <h6>5343.43</h6>
                    </div>
                    <div class="val cen">
                        <h6>DISCOUNT</h6>
                        <h6>00.00</h6>
                    </div>
                    <div class="val cen">
                        <h6>TOTAL</h6>
                        <h6>5343.43</h6>
                    </div>
                    <button>CHECKOUT</button>
                </div>
            </span>
        </div>

    </div>

    <div class="container">
        <nav class="">
            <div class="logo n cen">
                <img src="logo.png" alt="">
 
            </div>

            <div class="nav_content n cen">

                <div class="tabs cen">
                    <span class="cen">Categories</span>
                    <span class="cen">Discover</span>
                    <span class="cen" onclick="location.href='shop.html'">Shop</span>
                    <span class="cen">Hot Deals</span>
                    <span class="cen">Swift Pay</span>

                </div>

              


            </div>

            <div class="search n cen">
                <input type="text" placeholder="Search for products or vendors">
                <i class="bi bi-search"></i>
            </div>

            <div class="cart n cen">
                <div class="cir cen">
                    <i class="bi bi-cart4"></i>

                </div>
            </div>

        </nav>


        <div class="content cen">
            <div class="hero">
                <span class="hs1">
                    <h3>Scan and Pay, Swiftly Pay All Mall Vendors With One Tap</h3>
                    <button>Pay Now</button>
                </span>
                <span class="hs2 ">
                    <img src="pay.png" alt="">
                </span>

            </div>
            <div class="line cen">
                <select name="category" id="category">
                    <option value="" selected disabled>Category</option>
                    <option value="electronics">Electronics</option>
                    <option value="clothing">Clothing</option>
                    <option value="home">Home </option>
                    <!-- Add more categories as needed -->
                </select>
                <select name="brand" id="brand">
                    <option value="" selected disabled>Brand</option>
                    <option value="brand1">Brand 1</option>
                    <option value="brand2">Brand 2</option>
                    <option value="brand3">Brand 3</option>
                    <!-- Add more brands as needed -->
                </select>
                <select name="color" id="color">
                    <option value="" selected disabled>Color</option>
                    <option value="red">Red</option>
                    <option value="blue">Blue</option>
                    <option value="green">Green</option>
                    <!-- Add more colors as needed -->
                </select>
                <select name="size" id="size">
                    <option value="" selected disabled>Size</option>
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                    <!-- Add more sizes as needed -->
                </select>
                <select name="price" id="price">
                    <option value="" selected disabled>Price Range</option>
                    <option value="0-50">$0 - $50</option>
                    <option value="50-100">$50 - $100</option>
                    <option value="100-200">$100 - $200</option>
                    <!-- Add more price ranges as needed -->
                </select>
                <select name="condition" id="condition">
                    <option value="" selected disabled>Condition</option>
                    <option value="new">New</option>
                    <option value="used">Used</option>
                    <!-- Add more conditions as needed -->
                </select>
            
                <div class="spe cen">
                    <select name="filter" id="filter">
                        <option value="all" selected>All Filters</option>
                        <option value="brand">Brand</option>
                        <option value="color">Color</option>
                        <!-- Add more filter options as needed -->
                    </select>
                    <select name="sort" id="sort">
                        <option value="relevance" selected>Sort By Relevance</option>
                        <option value="price_low">Price: Low to High</option>
                        <option value="price_high">Price: High to Low</option>
                        <!-- Add more sorting options as needed -->
                    </select>
                </div>
            </div>
            
          
            <div class="line">
                <h4>Best Products For You</h4>
            </div>


            <div class="featured">
    <?php
    // Query to fetch products from the database
    $sql = "SELECT * FROM products ORDER BY RAND()";
    $result = $conn->query($sql);

    // Check if there are any results
    if ($result->num_rows > 0) {
        // Output data of each row
        while ($row = $result->fetch_assoc()) {
            // Output HTML for displaying each product with onclick event
            echo '<div class="card">';
            echo '<div class="img cen" onclick="viewProduct(' . $row["product_id"] . ')">';
            echo '<img src="./products' . $row["image1"] . '" alt="' . $row["product_name"] . '">';
            echo '</div>';
            echo '<span>';
            echo '<h4 onclick="viewProduct(' . $row["product_id"] . ')">' . $row["product_name"] . '</h4>';
            echo '<div class="stars">';
            echo '<i class="bi bi-star-fill"></i>';
            echo '<i class="bi bi-star-fill"></i>';
            echo '<i class="bi bi-star-fill"></i>';
            echo '<i class="bi bi-star-fill"></i>';
            echo '<i class="bi bi-star-fill"></i>';
            echo '<aside>(24)</aside>';
            echo '</div>';
            echo '<div class="price">$' . $row["product_price"] . '</div>';
            echo '<div class="bag cen" onclick="addToCart(' . $row["product_id"] . ')">';
            echo '<div class="i cen" ><i class="bi bi-bag-plus"></i></div>';
            echo '<h6>Add to cart</h6>';
            echo '</div>';
            echo '</span>';
            echo '</div>';
        }
    } else {
        echo "0 results";
    }

    // Close connection
    $conn->close();
    ?>
</div>



           
            
        </div>
       

       


    </div>

    <script>

function addToCart(productId) {
    // AJAX request to add product to cart
    $.ajax({
        type: "POST",
        url: "backend/add_cart.php", // Path to your cart.php file
        data: { productId: productId }, // Include the product ID in the data sent to cart.php
        success: function(response) {
            console.log(response); // Log the response from cart.php
        }
    });
}


    function viewProduct(productId) {
        // Redirect to product.php with the product ID in the URL
        window.location.href = 'product.php?product_id=' + btoa(productId);
    }
</script>
    
</body>
</html>